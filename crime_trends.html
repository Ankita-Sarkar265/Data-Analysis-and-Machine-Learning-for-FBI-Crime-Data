{% extends "base.html" %}
{% block content %}
<div class="container" style="margin-top: 40px;">
  <h1 class="text-center">Crime Trends Over the Years</h1>
  <div id="graph" style="width: 100%; height: 600px;"></div>
</div>

<script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
<script>
  document.addEventListener("DOMContentLoaded", function() {
    // Parse the Plotly JSON safely
    try {
      const graphJSON = {{ graphJSON | safe }};
      Plotly.newPlot('graph', graphJSON.data, graphJSON.layout);
    } catch (e) {
      console.error("‚ùå Failed to render graph:", e);
      alert("Plotly error: " + e.message);
    }
  });
</script>
{% endblock %}
